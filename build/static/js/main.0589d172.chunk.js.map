{"version":3,"sources":["images/basket.svg","data/initialData.js","constants/constants.js","reducers/reducers.js","components/Nav.js","services/services.js","helpers/auth-header.js","actions/actions.js","components/LoginPage.js","components/ProductItem.js","components/CartProductItem.js","components/Cart.js","components/ProductsPage.js","components/CheckoutPage.js","components/NotFoundPage.js","components/ConfirmationPage.js","routers/AppRouter.js","serviceWorker.js","index.js","helpers/fake-backend.js"],"names":["module","exports","__webpack_require__","p","initialCartState","cart","products","id","name","price","cartTotal","alertConstants","userConstants","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","GETALL_REQUEST","GETALL_SUCCESS","GETALL_FAILURE","user","JSON","parse","localStorage","getItem","initialState","loggedIn","Nav","react_default","a","createElement","className","NavLink","to","src","basket","alt","width","height","activeClassName","exact","Component","logout","removeItem","handleResponse","response","text","then","data","ok","status","window","location","reload","error","message","statusText","Promise","reject","userService","username","password","requestOptions","method","headers","Content-Type","body","stringify","fetch","token","setItem","Authorization","authHeader","history","createBrowserHistory","alertActions","type","userActions","login","dispatch","success","push","failure","getAll","users","LoginPage","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","e","_e$target","target","value","setState","defineProperty","handleSubmit","preventDefault","submitted","_this$state","state","_this$props","loggingIn","alert","authentication","_this$state2","onSubmit","htmlFor","onChange","style","marginRight","role","connect","ProductItem","onClick","CartProductItem","count","Cart","handleRemove","onRemove","calcTotal","_this2","map","product","reduce","b","components_CartProductItem","assign","key","arguments","length","undefined","removeFromCart","ProductsPage","handleAdd","values","onAdd","components_ProductItem","components_Cart","_ref","_ref$count","addToCart","CheckoutPage","handleKeyUp","classList","remove","add","noValidate","defaultValue","firstName","required","onKeyUp","lastName","placeholder","phone","address","defaultChecked","NotFoundPage","ConfirmationPage","date","Date","receiveDate","setDate","getDate","dd","mm","getMonth","yyyy","getFullYear","createHistory","AppRouter","Router","components_Nav","Switch","Route","path","component","Boolean","hostname","match","loggerMiddleware","createLogger","store","createStore","action","productsReducer","find","objectSpread","toConsumableArray","concat","filter","_ref2","cartReducer","cartTotalReducer","loading","items","applyMiddleware","thunkMiddleware","realFetch","url","opts","resolve","setTimeout","endsWith","params","filteredUsers","responseJson","configureFakeBackend","ReactDOM","render","react_redux_es","routers_AppRouter","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0589d172.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/basket.4a91dad9.svg\";","// INITIAL STATE\r\nexport const initialCartState = {\r\n  cart: [],\r\n  products: [\r\n    {\r\n      id: 1,\r\n      name: 'Apple',\r\n      price: 6\r\n    },\r\n    {\r\n      id: 2,\r\n      name: 'Orange',\r\n      price: 7\r\n    },\r\n    {\r\n      id: 3,\r\n      name: 'Kiwifruit',\r\n      price: 10\r\n    },\r\n    {\r\n      id: 4,\r\n      name: 'Grenade',\r\n      price: 15\r\n    },\r\n    {\r\n      id: 5,\r\n      name: 'Banana',\r\n      price: 4\r\n    },\r\n    {\r\n      id: 6,\r\n      name: 'Tomato',\r\n      price: 2\r\n    },\r\n    {\r\n      id: 7,\r\n      name: 'Cucumber',\r\n      price: 3\r\n    },\r\n    {\r\n      id: 8,\r\n      name: 'Salad',\r\n      price: 12\r\n    },\r\n  ],\r\n  cartTotal: 0\r\n};","export const alertConstants = {\r\n  SUCCESS: 'ALERT_SUCCESS',\r\n  ERROR: 'ALERT_ERROR',\r\n  CLEAR: 'ALERT_CLEAR'\r\n};\r\n\r\nexport const userConstants = {\r\n  LOGIN_REQUEST: 'USERS_LOGIN_REQUEST',\r\n  LOGIN_SUCCESS: 'USERS_LOGIN_SUCCESS',\r\n  LOGIN_FAILURE: 'USERS_LOGIN_FAILURE',\r\n  \r\n  LOGOUT: 'USERS_LOGOUT',\r\n\r\n  GETALL_REQUEST: 'USERS_GETALL_REQUEST',\r\n  GETALL_SUCCESS: 'USERS_GETALL_SUCCESS',\r\n  GETALL_FAILURE: 'USERS_GETALL_FAILURE',\r\n};","import { initialCartState } from '../data/initialData';\r\nimport { alertConstants, userConstants } from '../constants/constants';\r\n\r\nconst productsReducer = (state, action) => {\r\n  switch(action.type) {\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst cartReducer = (state, action) => {\r\n  switch(action.type) {\r\n    case 'ADD_TO_CART':\r\n      const isInCart = state.find(({ id }) => id === action.product.id);\r\n      if (isInCart) {\r\n        return state.map(product => {\r\n            if (product.id === action.product.id) {\r\n              product = { ...product, count: product.count + 1 };\r\n            }\r\n            return product;\r\n          })\r\n      } else {\r\n        return [\r\n          ...state,\r\n          action.product\r\n        ]\r\n      }\r\n    case 'REMOVE_FROM_CART':\r\n      return state.filter(({ id }) => id !== action.id);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst cartTotalReducer = (state, action) => {\r\n  const cart = action.cart; // access to Cart\r\n  switch(action.type) {\r\n    case 'CALC_TOTAL':\r\n      return Object.values(cart.map(product => product.price * product.count)).reduce((a, b) => { return a + b; }, 0);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n/*\r\nexport const mainReducer = combineReducers({\r\n  products: productsReducer,\r\n  cart: cartReducer,\r\n  cartTotal: cartTotalReducer\r\n});\r\n*/\r\n\r\n// ----------------------------------------- AUTH ----------------------------------------------------------------------//\r\n\r\nexport const alert = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case alertConstants.SUCCESS:\r\n      return {\r\n        type: 'alert-success',\r\n        message: action.message\r\n      };\r\n    case alertConstants.ERROR:\r\n      return {\r\n        type: 'alert-danger',\r\n        message: action.message\r\n      };\r\n    case alertConstants.CLEAR:\r\n      return {};\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nlet user = JSON.parse(localStorage.getItem('user'));\r\nconst initialState = user ? { loggedIn: true, user } : {};\r\n\r\nexport const authentication = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case userConstants.LOGIN_REQUEST:\r\n      return {\r\n        loggingIn: true,\r\n        user: action.user\r\n      };\r\n    case userConstants.LOGIN_SUCCESS:\r\n      return {\r\n        loggedIn: true,\r\n        user: action.user\r\n      };\r\n    case userConstants.LOGIN_FAILURE:\r\n      return {};\r\n    case userConstants.LOGOUT:\r\n      return {};\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const users = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case userConstants.GETALL_REQUEST:\r\n      return {\r\n        loading: true\r\n      };\r\n    case userConstants.GETALL_SUCCESS:\r\n      return {\r\n        items: action.users\r\n      };\r\n    case userConstants.GETALL_FAILURE:\r\n      return { \r\n        error: action.error\r\n      };\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const rootReducer = (state = { products: initialCartState.products, cart: initialCartState.cart, cartTotal: 0, authentication: {}, users: {}, alert: {} }, action) => {\r\n  const cart = state.cart; // for cartTotalReducer access\r\n  return {\r\n    products: productsReducer(state.products, action),\r\n    cart: cartReducer(state.cart, action),\r\n    cartTotal: cartTotalReducer(state.cartTotal, {...action, cart}),\r\n    authentication: authentication(state.authentication, action),\r\n    users: users(state.users, action),\r\n    alert: alert(state.alert, action)\r\n  };\r\n};","import React, { Component } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport basket from '../images/basket.svg';\r\n\r\nclass Nav extends Component {\r\n  render() {\r\n    return (\r\n      <header>\r\n        <nav className=\"App-nav text-center\">\r\n          <ul className=\"nav justify-content-center\">\r\n            <li className=\"nav-item nav-item--logo\"><NavLink className=\"nav-link\" to=\"/products\"><img src={basket} alt=\"\" width=\"40\" height=\"40\" /></NavLink></li>\r\n            <li className=\"nav-item\"><NavLink className=\"nav-link\" activeClassName=\"active\" exact to=\"/login\">Login</NavLink></li>\r\n            <li className=\"nav-item\"><NavLink className=\"nav-link\" activeClassName=\"active\" to=\"/products\">Products</NavLink></li>\r\n          </ul>\r\n        </nav>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Nav;","import { authHeader } from '../helpers/auth-header';\r\n\r\nconst login = (username, password) => {\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ username, password })\r\n  };\r\n\r\n  return fetch(`/login`, requestOptions)\r\n    .then(handleResponse)\r\n    .then(user => {\r\n      // login successful if there's a jwt token in the response\r\n      if (user.token) {\r\n        // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n      }\r\n\r\n      return user;\r\n    });\r\n}\r\n\r\nconst logout = () => {\r\n  // remove user from local storage to log user out\r\n  localStorage.removeItem('user');\r\n}\r\n\r\nconst getAll = () => {\r\n  const requestOptions = {\r\n    method: 'GET',\r\n    headers: authHeader()\r\n  };\r\n\r\n  return fetch(`/login`, requestOptions).then(handleResponse);\r\n}\r\n\r\nconst handleResponse = (response) => {\r\n  return response.text().then(text => {\r\n    const data = text && JSON.parse(text);\r\n    if (!response.ok) {\r\n      if (response.status === 401) {\r\n        // auto logout if 401 response returned from api\r\n        logout();\r\n        window.location.reload(true);\r\n      }\r\n\r\n      const error = (data && data.message) || response.statusText;\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    return data;\r\n  });\r\n}\r\n\r\nexport const userService = {\r\n  login,\r\n  logout,\r\n  getAll\r\n};","export function authHeader() {\r\n  // return authorization header with jwt token\r\n  let user = JSON.parse(localStorage.getItem('user'));\r\n\r\n  if (user && user.token) {\r\n      return { 'Authorization': 'Bearer ' + user.token };\r\n  } else {\r\n      return {};\r\n  }\r\n}","import { alertConstants, userConstants } from '../constants/constants';\r\nimport { userService } from '../services/services';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nconst history = createBrowserHistory();\r\n\r\n// CART ACTIONS\r\n// addToCart\r\nexport const addToCart = (\r\n  {\r\n    id,\r\n    name,\r\n    price,\r\n    count = 1\r\n  } = {}\r\n) => (\r\n  {\r\n    type: 'ADD_TO_CART',\r\n    product: {\r\n      id,\r\n      name,\r\n      price,\r\n      count\r\n    }\r\n  }\r\n);\r\n\r\n// removeFromCart\r\nexport const removeFromCart = ( { id } = {} ) => ({\r\n  type: 'REMOVE_FROM_CART',\r\n  id,\r\n});\r\n\r\n// ALERT ACTIONS\r\nconst success = message => ({ type: alertConstants.SUCCESS, message });\r\nconst error = message => ({ type: alertConstants.ERROR, message });\r\nconst clear = () => ({ type: alertConstants.CLEAR });\r\n\r\nconst alertActions = {\r\n  success,\r\n  error,\r\n  clear\r\n};\r\n\r\n// AUTHENTICATION ACTIONS\r\n// login\r\nconst login = (username, password) => {\r\n  return dispatch => {\r\n    dispatch(request({ username }));\r\n\r\n    userService.login(username, password)\r\n      .then(\r\n        user => { \r\n          dispatch(success(user));\r\n          history.push('/');\r\n        },\r\n        error => {\r\n          dispatch(failure(error));\r\n          dispatch(alertActions.error(error));\r\n        }\r\n      );\r\n  };\r\n\r\n  function request(user) { return { type: userConstants.LOGIN_REQUEST, user } }\r\n  function success(user) { return { type: userConstants.LOGIN_SUCCESS, user } }\r\n  function failure(error) { return { type: userConstants.LOGIN_FAILURE, error } }\r\n}\r\n\r\n// logout\r\nconst logout = () => {\r\n  userService.logout();\r\n  return { type: userConstants.LOGOUT };\r\n}\r\n\r\n// getAll\r\nconst getAll = () => {\r\n  return dispatch => {\r\n      dispatch(request());\r\n\r\n      userService.getAll()\r\n          .then(\r\n              users => dispatch(success(users)),\r\n              error => dispatch(failure(error))\r\n          );\r\n  };\r\n\r\n  function request() { return { type: userConstants.GETALL_REQUEST } }\r\n  function success(users) { return { type: userConstants.GETALL_SUCCESS, users } }\r\n  function failure(error) { return { type: userConstants.GETALL_FAILURE, error } }\r\n}\r\n\r\nexport const userActions = {\r\n  login,\r\n  logout,\r\n  getAll\r\n};","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { userActions } from '../actions/actions';\r\n\r\nclass LoginPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // reset login status\r\n    // this.props.dispatch(userActions.logout());\r\n\r\n    this.state = {\r\n        username: '',\r\n        password: '',\r\n        submitted: false\r\n    };\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({ [name]: value });\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.setState({ submitted: true });\r\n    const { username, password } = this.state;\r\n    const { dispatch } = this.props;\r\n    if (username && password) {\r\n      dispatch(userActions.login(username, password));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { loggingIn, alert, authentication } = this.props;\r\n    const { username, password, submitted } = this.state;\r\n\r\n    return (\r\n      <form name=\"form\" onSubmit={this.handleSubmit}>\r\n        <h1 className=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\r\n        <div className={'form-group' + (submitted && !username ? ' has-error' : '')}>\r\n            <label htmlFor=\"username\">Username</label>\r\n            <input type=\"text\" className={'form-control' + (submitted && !username ? ' is-invalid' : '')} name=\"username\" value={username} onChange={this.handleChange} />\r\n            {submitted && !username &&\r\n                <div className=\"invalid-feedback\">Username is required</div>\r\n            }\r\n        </div>\r\n        <div className={'form-group' + (submitted && !password ? ' has-error' : '')}>\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input type=\"password\" className={'form-control' + (submitted && !password ? ' is-invalid' : '')} name=\"password\" value={password} onChange={this.handleChange} />\r\n            {submitted && !password &&\r\n                <div className=\"invalid-feedback\">Password is required</div>\r\n            }\r\n        </div>\r\n        <div className=\"form-group\">\r\n            <button className=\"btn btn-primary\" style={{marginRight: 10}}>Login</button>\r\n            {loggingIn &&\r\n              <img alt=\"\" src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\r\n            }\r\n        </div>\r\n        {alert.message && !authentication.loggedIn &&\r\n          <div className=\"alert alert-danger\">{alert.message}</div>\r\n        }\r\n        {authentication.loggedIn &&\r\n          <div className=\"alert alert-success\" role=\"alert\">\r\n            <h4 className=\"alert-heading\">Well done!</h4>\r\n            <p>Logged in as: <strong>{authentication.user.username}</strong></p>\r\n          </div>\r\n        }\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { loggingIn } = state.authentication;\r\n  const { alert } = state;\r\n  const { authentication } = state;\r\n  return ({\r\n    loggingIn,\r\n    alert,\r\n    authentication\r\n  });\r\n}\r\n\r\nexport default connect(mapStateToProps)(LoginPage);","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass ProductItem extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-4 product-item\">\r\n        <div className=\"product-grid4\">\r\n          <div className=\"product-content\">\r\n            <h3 className=\"title\">{this.props.name}</h3>\r\n            <div className=\"price\">\r\n              ${this.props.price}\r\n            </div>\r\n            <button className=\"add-to-cart\" onClick={() => { this.props.onClick(this.props.id, this.props.name, this.props.price) }}>ADD TO CART</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nProductItem.propTypes = {\r\n  name: PropTypes.string,\r\n  price: PropTypes.number\r\n}\r\n\r\nexport default ProductItem;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass CartProductItem extends Component {\r\n  render() {\r\n    return (\r\n      <li className=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n        <div>\r\n          <h6 className=\"cart-item--title my-0\">{this.props.name}</h6>\r\n          <small>x {this.props.count}</small>\r\n          <button className=\"remove-item\" onClick={() => this.props.onClick(this.props.id)}>X</button>\r\n        </div>\r\n        <span className=\"text-muted\">${this.props.price * this.props.count}</span>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n\r\nCartProductItem.propTypes = {\r\n  name: PropTypes.string,\r\n  price: PropTypes.number,\r\n  count: PropTypes.number\r\n}\r\n\r\nexport default CartProductItem;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport CartProductItem from './CartProductItem';\r\nimport { removeFromCart } from '../actions/actions';\r\n\r\nclass Cart extends Component {\r\n\r\n  handleRemove = id => {\r\n    this.props.onRemove(id);\r\n    this.props.calcTotal();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App-cart\">\r\n        <h4 className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <span className=\"text-muted\">Your cart</span>\r\n          <span className=\"badge badge-secondary badge-pill\">\r\n          {\r\n            this.props.cart.map(product => product.count).reduce((a, b) => a + b, 0)\r\n          }\r\n          </span>\r\n        </h4>\r\n        <ul className=\"list-group mb-3\">\r\n          {\r\n            this.props.cart.map((product) => {\r\n              return <CartProductItem key={product.id} id={product.id} {...product} onClick={this.handleRemove} />;\r\n            })\r\n          }\r\n          <li className=\"list-group-item d-flex justify-content-between\">\r\n            <span>Total (USD)</span>\r\n            <strong>${this.props.cartTotal}</strong>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCart.propTypes = {\r\n  cartTotal: PropTypes.number\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.products,\r\n    cart: state.cart,\r\n    cartTotal: state.cartTotal\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onRemove: id => dispatch(removeFromCart({ id: id })),\r\n    calcTotal: () => dispatch({ type: 'CALC_TOTAL' })\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);","import React, { Component } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { addToCart } from '../actions/actions';\r\nimport ProductItem from './ProductItem';\r\nimport Cart from './Cart';\r\n\r\nclass ProductsPage extends Component {\r\n\r\n  handleAdd = (id, name, price) => {\r\n    if (Object.values(this.props.cart.map(product => product.count)).reduce((a, b) => { return a + b; }, 0) < 3) {\r\n      this.props.onAdd(id, name, price);\r\n      this.props.calcTotal();\r\n    } else {\r\n      alert('You can only add 3 or less items to cart!')\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h3 className=\"products-page-title\">Store</h3>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-8\">\r\n            <div className=\"row products-container\">\r\n              {\r\n                this.props.products.map((product) => {\r\n                  return <ProductItem key={product.id} id={product.id} {...product} onClick={this.handleAdd} />;\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-4 mb-4\">\r\n            <Cart />\r\n            <NavLink className=\"btn btn-primary\" to=\"/checkout\">Proceed to checkout</NavLink>\r\n          </div>\r\n\r\n        </div>\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.products,\r\n    cart: state.cart,\r\n    cartTotal: state.cartTotal\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onAdd: (id, name, price) => dispatch(addToCart({ id: id, name: name, price: price })),\r\n    calcTotal: () => dispatch({ type: 'CALC_TOTAL' })\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductsPage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Cart from './Cart';\r\n\r\nclass CheckoutPage extends Component {\r\n\r\n  handleKeyUp = (e) => {\r\n    e.target.value ? e.target.classList.remove('is-invalid') : e.target.classList.add('is-invalid');\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.props.history.push('/confirmation');\r\n  }\r\n\r\n  render() {\r\n    const { authentication } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-4 order-md-2 mb-4\">\r\n            <Cart />\r\n          </div>\r\n\r\n          <div className=\"col-md-8 order-md-1\">\r\n            <h4 className=\"mb-3\">Billing address</h4>\r\n            <form className=\"needs-validation\" noValidate>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"firstName\">First name</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"firstName\" defaultValue={authentication.loggedIn ? authentication.user.firstName : ''} required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Valid first name is required.\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"lastName\">Last name</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"lastName\" defaultValue={authentication.loggedIn ? authentication.user.lastName : ''} required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Valid last name is required.\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"address\">Phone number</label>\r\n                <input type=\"text\" className=\"form-control\" id=\"phone\" placeholder=\"XXXXXXXXX\" defaultValue={authentication.loggedIn ? authentication.user.phone : ''} required onKeyUp={this.handleKeyUp} />\r\n                <div className=\"invalid-feedback\">\r\n                  Please enter your phone number.\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"address\">Address</label>\r\n                <input type=\"text\" className=\"form-control\" id=\"address\" placeholder=\"ul. Winogrady 3/5\" defaultValue={authentication.loggedIn ? authentication.user.address : ''} required onKeyUp={this.handleKeyUp} />\r\n                <div className=\"invalid-feedback\">\r\n                  Please enter your shipping address.\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"col-md-5 mb-3\">\r\n                  <label htmlFor=\"country\">Country</label>\r\n                  <select className=\"custom-select d-block w-100\" id=\"country\" required>\r\n                    <option value=\"\">Choose...</option>\r\n                    <option>Poland</option>\r\n                  </select>\r\n                  <div className=\"invalid-feedback\">\r\n                    Please select a valid country.\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-4 mb-3\">\r\n                  <label htmlFor=\"state\">City</label>\r\n                  <select className=\"custom-select d-block w-100\" id=\"state\" required>\r\n                    <option value=\"\">Choose...</option>\r\n                    <option>Pozna≈Ñ</option>\r\n                  </select>\r\n                  <div className=\"invalid-feedback\">\r\n                    Please provide a valid city.\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-3 mb-3\">\r\n                  <label htmlFor=\"zip\">Zip</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"zip\" required />\r\n                  <div className=\"invalid-feedback\">\r\n                    Zip code required.\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <hr className=\"mb-4\" />\r\n\r\n              <h4 className=\"mb-3\">Payment</h4>\r\n\r\n              <div className=\"d-block my-3\">\r\n                <div className=\"custom-control custom-radio\">\r\n                  <input id=\"credit\" name=\"paymentMethod\" type=\"radio\" className=\"custom-control-input\" defaultChecked required />\r\n                  <label className=\"custom-control-label\" htmlFor=\"credit\">Credit card</label>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"cc-name\">Name on card</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"cc-name\" defaultValue={authentication.loggedIn ? authentication.user.firstName + ' ' + authentication.user.lastName : ''} required onKeyUp={this.handleKeyUp} />\r\n                  <small className=\"text-muted\">Full name as displayed on card</small>\r\n                  <div className=\"invalid-feedback\">\r\n                    Name on card is required\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"cc-number\">Credit card number</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"cc-number\" required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Credit card number is required\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-3 mb-3\">\r\n                  <label htmlFor=\"cc-expiration\">Expiration</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"cc-expiration\" required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Expiration date required\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-3 mb-3\">\r\n                  <label htmlFor=\"cc-cvv\">CVV</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"cc-cvv\" required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Security code required\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <hr className=\"mb-4\" />\r\n              <button className=\"btn btn-primary btn-lg btn-block\" type=\"submit\" onClick={this.handleSubmit}>Continue to checkout</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { authentication } = state;\r\n  return ({\r\n    authentication\r\n  });\r\n}\r\n\r\nexport default connect(mapStateToProps)(CheckoutPage);","import React, { Component } from 'react';\r\n\r\nclass NotFoundPage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"products-page\">\r\n        <h1>NOT FOUND!</h1>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotFoundPage;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass ConfirmationPage extends Component {\r\n  render() {\r\n    let date = new Date();\r\n    let receiveDate = new Date(date);\r\n    receiveDate.setDate(receiveDate.getDate() + 3);\r\n\r\n    let dd = receiveDate.getDate();\r\n    let mm = receiveDate.getMonth() + 1;\r\n    let yyyy = receiveDate.getFullYear();\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-8 offset-2\">\r\n          <div className=\"alert alert-success\" role=\"alert\">\r\n            <h4 className=\"alert-heading mt-2 mb-4\">Thank You for your order!</h4>\r\n            <hr />\r\n            <div className=\"order-total\">\r\n              <ul className=\"list-group mb-3\">\r\n                {\r\n                  this.props.cart.map((product) => {\r\n                    return (\r\n                      <li key={product.id} className=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n                        <div>\r\n                          <h6 className=\"cart-item--title my-0\">{product.name}</h6>\r\n                          <small>x {product.count}</small>\r\n                        </div>\r\n                        <span className=\"text-muted\">${product.price * product.count}</span>\r\n                      </li>\r\n                    );\r\n                  })\r\n                }\r\n                <li className=\"list-group-item d-flex justify-content-between\">\r\n                  <span>Total (USD)</span>\r\n                  <strong>${this.props.cartTotal}</strong>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <hr />\r\n            <p className=\"mb-2\">You will receive your goodies on <strong>{dd}.{mm}.{yyyy}</strong></p>\r\n          </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.products,\r\n    cart: state.cart,\r\n    cartTotal: state.cartTotal\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps)(ConfirmationPage);","import React from 'react';\r\nimport { Router, Route, Switch } from 'react-router-dom';\r\nimport createHistory from 'history/createBrowserHistory';\r\nimport Nav from '../components/Nav';\r\nimport LoginPage from '../components/LoginPage';\r\nimport ProductsPage from '../components/ProductsPage';\r\nimport CheckoutPage from '../components/CheckoutPage';\r\nimport NotFoundPage from '../components/NotFoundPage';\r\nimport ConfirmationPage from '../components/ConfirmationPage';\r\n\r\nexport const history = createHistory();\r\n\r\nconst AppRouter = () => (\r\n  <Router history={history}>\r\n    <div>\r\n      <Nav />\r\n      <main className=\"App-main\">\r\n        <Switch>\r\n          <Route path=\"/\" component={ProductsPage} exact={true} />\r\n          <Route path=\"/login\" component={LoginPage} exact={true} />\r\n          <Route path=\"/products\" component={ProductsPage} exact={true} />\r\n          <Route path=\"/checkout\" component={CheckoutPage} exact={true} />\r\n          <Route path=\"/confirmation\" component={ConfirmationPage} exact={true} />\r\n          <Route component={NotFoundPage} />\r\n        </Switch>\r\n      </main>\r\n    </div>\r\n  </Router>\r\n);\r\n\r\nexport default AppRouter;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport { rootReducer } from './reducers/reducers';\nimport { configureFakeBackend } from './helpers/fake-backend';\nimport { Provider } from 'react-redux';\nimport './styles/style.scss';\nimport AppRouter from './routers/AppRouter';\nimport * as serviceWorker from './serviceWorker';\n\nconst loggerMiddleware = createLogger();\n\nconst store = createStore(\n  rootReducer,\n  applyMiddleware(\n    thunkMiddleware,\n    loggerMiddleware\n  )\n);\n\n// setup fake backend\nconfigureFakeBackend();\n\nReactDOM.render(\n  <Provider store={store}>\n    <AppRouter />\n  </Provider>, \n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export function configureFakeBackend() {\r\n  let users = [\r\n    {\r\n      id: 1,\r\n      username: 'admin',\r\n      password: 'admin'\r\n    },\r\n    {\r\n      id: 2,\r\n      username: 'rbatsenko',\r\n      password: '12345',\r\n      firstName: 'Roman',\r\n      lastName: 'Batsenko',\r\n      address: 'ul. Dworcowa 55/2',\r\n      phone: 456789123\r\n    }\r\n  ];\r\n\r\n  let realFetch = window.fetch;\r\n\r\n  window.fetch = function (url, opts) {\r\n      return new Promise((resolve, reject) => {\r\n          // wrap in timeout to simulate server api call\r\n          setTimeout(() => {\r\n\r\n              // authenticate\r\n              if (url.endsWith('/login') && opts.method === 'POST') {\r\n                  // get parameters from post request\r\n                  let params = JSON.parse(opts.body);\r\n\r\n                  // find if any user matches login credentials\r\n                  let filteredUsers = users.filter(user => {\r\n                      return user.username === params.username && user.password === params.password;\r\n                  });\r\n\r\n                  if (filteredUsers.length) {\r\n                      // if login details are valid return user details and fake jwt token\r\n                      let user = filteredUsers[0];\r\n                      let responseJson = {\r\n                          id: user.id,\r\n                          username: user.username,\r\n                          firstName: user.firstName,\r\n                          lastName: user.lastName,\r\n                          address: user.address,\r\n                          phone: user.phone,\r\n                          token: 'fake-jwt-token'\r\n                      };\r\n                      resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\r\n                  } else {\r\n                      // else return error\r\n                      reject('Username or password is incorrect');\r\n                  }\r\n\r\n                  return;\r\n              }\r\n\r\n              // get users\r\n              if (url.endsWith('/users') && opts.method === 'GET') {\r\n                  // check for fake auth token in header and return users if valid, this security is implemented server side in a real application\r\n                  if (opts.headers && opts.headers.Authorization === 'Bearer fake-jwt-token') {\r\n                      resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(users))});\r\n                  } else {\r\n                      // return 401 not authorised if token is null or invalid\r\n                      reject('Unauthorised');\r\n                  }\r\n\r\n                  return;\r\n              }\r\n\r\n              // pass through any requests not handled above\r\n              realFetch(url, opts).then(response => resolve(response));\r\n\r\n          }, 500);\r\n      });\r\n  }\r\n}"],"sourceRoot":""}