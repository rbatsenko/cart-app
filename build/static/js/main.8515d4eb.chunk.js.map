{"version":3,"sources":["images/basket.svg","data/initialData.js","constants/constants.js","reducers/reducers.js","components/AdminRoute.js","components/Nav.js","services/services.js","helpers/auth-header.js","actions/actions.js","components/LoginPage.js","components/ProductItem.js","components/CartProductItem.js","components/Cart.js","components/ProductsPage.js","components/CheckoutPage.js","components/NotFoundPage.js","components/ConfirmationPage.js","components/ProductItemManage.js","components/ManageProductsPage.js","components/ManageUsersPage.js","routers/AppRouter.js","serviceWorker.js","index.js","helpers/fake-backend.js"],"names":["module","exports","__webpack_require__","p","initialCartState","cart","products","id","name","price","cartTotal","alertConstants","userConstants","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","GETALL_REQUEST","GETALL_SUCCESS","GETALL_FAILURE","user","JSON","parse","localStorage","getItem","initialState","loggedIn","AdminRoute","_ref","Component","component","rest","Object","objectWithoutProperties","react_default","a","createElement","Route","assign","render","props","username","Redirect","to","pathname","state","from","location","Nav","handleLogout","e","preventDefault","_this","history","push","className","NavLink","src","basket","alt","width","height","activeClassName","Fragment","href","onClick","this","withRouter","connect","authentication","logout","removeItem","handleResponse","response","text","then","data","ok","status","window","reload","error","message","statusText","Promise","reject","userService","password","requestOptions","method","headers","Content-Type","body","stringify","fetch","token","setItem","Authorization","authHeader","createBrowserHistory","alertActions","type","userActions","login","dispatch","success","failure","getAll","users","LoginPage","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleChange","_e$target","target","value","setState","defineProperty","handleSubmit","submitted","_this$state","_this$props","loggingIn","alert","_this$state2","onSubmit","htmlFor","onChange","style","marginRight","ProductItem","CartProductItem","count","Cart","handleRemove","onRemove","calcTotal","_this2","map","product","reduce","b","components_CartProductItem","key","arguments","length","undefined","removeFromCart","ProductsPage","handleAdd","values","onAdd","components_ProductItem","components_Cart","_ref3","_ref3$count","addToCart","CheckoutPage","cardIsEmpty","handleKeyUp","classList","remove","add","defaultValue","firstName","required","onKeyUp","lastName","placeholder","phone","address","defaultChecked","NotFoundPage","ConfirmationPage","date","Date","receiveDate","setDate","getDate","dd","mm","getMonth","yyyy","getFullYear","role","ProductItemManage","ManageProductsPage","productName","productPrice","console","log","Math","max","apply","handleProductName","handleProductPrice","parseInt","components_ProductItemManage","addProduct","removeProduct","ManageUsersPage","createHistory","AppRouter","Router","components_Nav","Switch","path","exact","AdminRoute_AdminRoute","Boolean","hostname","match","loggerMiddleware","createLogger","store","createStore","action","toConsumableArray","concat","filter","productsReducer","find","_ref2","objectSpread","cartReducer","cartTotalReducer","loading","items","applyMiddleware","thunkMiddleware","realFetch","url","opts","resolve","setTimeout","endsWith","params","filteredUsers","responseJson","configureFakeBackend","ReactDOM","react_redux_es","routers_AppRouter","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8515d4eb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/basket.4a91dad9.svg\";","// INITIAL STATE\r\nexport const initialCartState = {\r\n  cart: [],\r\n  products: [\r\n    {\r\n      id: 1,\r\n      name: 'Apple',\r\n      price: 6\r\n    },\r\n    {\r\n      id: 2,\r\n      name: 'Orange',\r\n      price: 7\r\n    },\r\n    {\r\n      id: 3,\r\n      name: 'Kiwifruit',\r\n      price: 10\r\n    },\r\n    {\r\n      id: 4,\r\n      name: 'Grenade',\r\n      price: 15\r\n    },\r\n    {\r\n      id: 5,\r\n      name: 'Banana',\r\n      price: 4\r\n    },\r\n    {\r\n      id: 6,\r\n      name: 'Tomato',\r\n      price: 2\r\n    },\r\n    {\r\n      id: 7,\r\n      name: 'Cucumber',\r\n      price: 3\r\n    },\r\n    {\r\n      id: 8,\r\n      name: 'Salad',\r\n      price: 12\r\n    },\r\n  ],\r\n  cartTotal: 0\r\n};","export const alertConstants = {\r\n  SUCCESS: 'ALERT_SUCCESS',\r\n  ERROR: 'ALERT_ERROR',\r\n  CLEAR: 'ALERT_CLEAR'\r\n};\r\n\r\nexport const userConstants = {\r\n  LOGIN_REQUEST: 'USERS_LOGIN_REQUEST',\r\n  LOGIN_SUCCESS: 'USERS_LOGIN_SUCCESS',\r\n  LOGIN_FAILURE: 'USERS_LOGIN_FAILURE',\r\n  \r\n  LOGOUT: 'USERS_LOGOUT',\r\n\r\n  GETALL_REQUEST: 'USERS_GETALL_REQUEST',\r\n  GETALL_SUCCESS: 'USERS_GETALL_SUCCESS',\r\n  GETALL_FAILURE: 'USERS_GETALL_FAILURE',\r\n};","import { initialCartState } from '../data/initialData';\r\nimport { alertConstants, userConstants } from '../constants/constants';\r\n\r\nconst productsReducer = (state, action) => {\r\n  switch(action.type) {\r\n    case 'ADD_PRODUCT':\r\n        return [\r\n          ...state,\r\n          action.product\r\n        ]\r\n    case 'REMOVE_PRODUCT':\r\n      return state.filter(({ id }) => id !== action.id);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst cartReducer = (state, action) => {\r\n  switch(action.type) {\r\n    case 'ADD_TO_CART':\r\n      const isInCart = state.find(({ id }) => id === action.product.id);\r\n      if (isInCart) {\r\n        return state.map(product => {\r\n            if (product.id === action.product.id) {\r\n              product = { ...product, count: product.count + 1 };\r\n            }\r\n            return product;\r\n          })\r\n      } else {\r\n        return [\r\n          ...state,\r\n          action.product\r\n        ]\r\n      }\r\n    case 'REMOVE_FROM_CART':\r\n      return state.filter(({ id }) => id !== action.id);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst cartTotalReducer = (state, action) => {\r\n  const cart = action.cart; // access to Cart\r\n  switch(action.type) {\r\n    case 'CALC_TOTAL':\r\n      return Object.values(cart.map(product => product.price * product.count)).reduce((a, b) => { return a + b; }, 0);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n/*\r\nexport const mainReducer = combineReducers({\r\n  products: productsReducer,\r\n  cart: cartReducer,\r\n  cartTotal: cartTotalReducer\r\n});\r\n*/\r\n\r\n// ----------------------------------------- AUTH ----------------------------------------------------------------------//\r\n\r\nexport const alert = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case alertConstants.SUCCESS:\r\n      return {\r\n        type: 'alert-success',\r\n        message: action.message\r\n      };\r\n    case alertConstants.ERROR:\r\n      return {\r\n        type: 'alert-danger',\r\n        message: action.message\r\n      };\r\n    case alertConstants.CLEAR:\r\n      return {};\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nlet user = JSON.parse(localStorage.getItem('user'));\r\nconst initialState = user ? { loggedIn: true, user } : {};\r\n\r\nexport const authentication = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case userConstants.LOGIN_REQUEST:\r\n      return {\r\n        loggingIn: true,\r\n        user: action.user\r\n      };\r\n    case userConstants.LOGIN_SUCCESS:\r\n      return {\r\n        loggedIn: true,\r\n        user: action.user\r\n      };\r\n    case userConstants.LOGIN_FAILURE:\r\n      return {};\r\n    case userConstants.LOGOUT:\r\n      return {};\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const users = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case userConstants.GETALL_REQUEST:\r\n      return {\r\n        loading: true\r\n      };\r\n    case userConstants.GETALL_SUCCESS:\r\n      return {\r\n        items: action.users\r\n      };\r\n    case userConstants.GETALL_FAILURE:\r\n      return { \r\n        error: action.error\r\n      };\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const rootReducer = (state = { products: initialCartState.products, cart: initialCartState.cart, cartTotal: 0, authentication: {}, users: {}, alert: {} }, action) => {\r\n  const cart = state.cart; // for cartTotalReducer access\r\n  return {\r\n    products: productsReducer(state.products, action),\r\n    cart: cartReducer(state.cart, action),\r\n    cartTotal: cartTotalReducer(state.cartTotal, {...action, cart}),\r\n    authentication: authentication(state.authentication, action),\r\n    users: users(state.users, action),\r\n    alert: alert(state.alert, action)\r\n  };\r\n};","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nexport const AdminRoute = ({ component: Component, ...rest }) => (\r\n  <Route {...rest} render={props => (\r\n    localStorage.getItem('user') && JSON.parse(localStorage.getItem('user')).username === 'admin'\r\n      ? <Component {...props} />\r\n      : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n  )} />\r\n);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport basket from '../images/basket.svg';\r\n\r\nclass Nav extends Component {\r\n  handleLogout = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/login');\r\n  }\r\n\r\n  render() {\r\n    //const { authentication } = this.props;\r\n    //let isLoggedIn = authentication.hasOwnProperty('loggedIn') ? authentication.loggedIn : false;\r\n    //let isAdmin = authentication.hasOwnProperty('user') ? authentication.user.username === 'admin' : false;\r\n\r\n    return (\r\n      <header>\r\n        <nav className=\"App-nav text-center\">\r\n          <ul className=\"nav justify-content-center\">\r\n            <li className=\"nav-item nav-item--logo\"><NavLink className=\"nav-link\" to=\"/products\"><img src={basket} alt=\"\" width=\"40\" height=\"40\" /></NavLink></li>\r\n            {\r\n              //!isLoggedIn &&\r\n              !localStorage.getItem('user') &&\r\n              <li className=\"nav-item\"><NavLink className=\"nav-link\" activeClassName=\"active\" to=\"/login\">Login</NavLink></li>\r\n            }\r\n            <li className=\"nav-item\"><NavLink className=\"nav-link\" activeClassName=\"active\" to=\"/products\">Products</NavLink></li>\r\n            {\r\n              //isLoggedIn && isAdmin &&\r\n              localStorage.getItem('user') && JSON.parse(localStorage.getItem('user')).username === 'admin' &&\r\n              <React.Fragment>\r\n                <li className=\"nav-item\"><NavLink className=\"nav-link\" activeClassName=\"active\" to=\"/manage-products\">Manage products</NavLink></li>\r\n                <li className=\"nav-item\"><NavLink className=\"nav-link\" activeClassName=\"active\" to=\"/manage-users\">Manage users</NavLink></li>\r\n              </React.Fragment>\r\n            }\r\n            {\r\n              //isLoggedIn &&\r\n              localStorage.getItem('user') &&\r\n              <React.Fragment>\r\n                <li className=\"nav-item\"><div className=\"navbar-text\">Logged in as <strong>{JSON.parse(localStorage.getItem('user')).username /*authentication.user.username*/}</strong></div></li>\r\n                <li className=\"nav-item\"><a className=\"nav-link\" href=\"/login\" onClick={this.handleLogout}>Logout</a></li>\r\n              </React.Fragment>\r\n            }\r\n          </ul>\r\n        </nav>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { authentication } = state;\r\n  return ({\r\n    authentication\r\n  });\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(Nav));","import { authHeader } from '../helpers/auth-header';\r\n\r\nconst login = (username, password) => {\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ username, password })\r\n  };\r\n\r\n  return fetch(`/login`, requestOptions)\r\n    .then(handleResponse)\r\n    .then(user => {\r\n      // login successful if there's a jwt token in the response\r\n      if (user.token) {\r\n        // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n      }\r\n\r\n      return user;\r\n    });\r\n}\r\n\r\nconst logout = () => {\r\n  // remove user from local storage to log user out\r\n  localStorage.removeItem('user');\r\n}\r\n\r\nconst getAll = () => {\r\n  const requestOptions = {\r\n    method: 'GET',\r\n    headers: authHeader()\r\n  };\r\n\r\n  return fetch(`/login`, requestOptions).then(handleResponse);\r\n}\r\n\r\nconst handleResponse = (response) => {\r\n  return response.text().then(text => {\r\n    const data = text && JSON.parse(text);\r\n    if (!response.ok) {\r\n      if (response.status === 401) {\r\n        // auto logout if 401 response returned from api\r\n        logout();\r\n        window.location.reload(true);\r\n      }\r\n\r\n      const error = (data && data.message) || response.statusText;\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    return data;\r\n  });\r\n}\r\n\r\nexport const userService = {\r\n  login,\r\n  logout,\r\n  getAll\r\n};","export function authHeader() {\r\n  // return authorization header with jwt token\r\n  let user = JSON.parse(localStorage.getItem('user'));\r\n\r\n  if (user && user.token) {\r\n      return { 'Authorization': 'Bearer ' + user.token };\r\n  } else {\r\n      return {};\r\n  }\r\n}","import { alertConstants, userConstants } from '../constants/constants';\r\nimport { userService } from '../services/services';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();\r\n\r\n// PRODUCTS ACTIONS\r\n// add Product\r\nexport const addProduct = (\r\n  {\r\n    id,\r\n    name,\r\n    price\r\n  } = {}\r\n) => (\r\n  {\r\n    type: 'ADD_PRODUCT',\r\n    product: {\r\n      id,\r\n      name,\r\n      price\r\n    }\r\n  }\r\n);\r\n\r\n// remove Product\r\nexport const removeProduct = ( { id } = {} ) => ({\r\n  type: 'REMOVE_PRODUCT',\r\n  id,\r\n});\r\n\r\n// CART ACTIONS\r\n// add to Cart\r\nexport const addToCart = (\r\n  {\r\n    id,\r\n    name,\r\n    price,\r\n    count = 1\r\n  } = {}\r\n) => (\r\n  {\r\n    type: 'ADD_TO_CART',\r\n    product: {\r\n      id,\r\n      name,\r\n      price,\r\n      count\r\n    }\r\n  }\r\n);\r\n\r\n// remove from Cart\r\nexport const removeFromCart = ( { id } = {} ) => ({\r\n  type: 'REMOVE_FROM_CART',\r\n  id,\r\n});\r\n\r\n// ALERT ACTIONS\r\nconst success = message => ({ type: alertConstants.SUCCESS, message });\r\nconst error = message => ({ type: alertConstants.ERROR, message });\r\nconst clear = () => ({ type: alertConstants.CLEAR });\r\n\r\nconst alertActions = {\r\n  success,\r\n  error,\r\n  clear\r\n};\r\n\r\n// AUTHENTICATION ACTIONS\r\n// login\r\nconst login = (username, password) => {\r\n  return dispatch => {\r\n    dispatch(request({ username }));\r\n\r\n    userService.login(username, password)\r\n      .then(\r\n        user => { \r\n          dispatch(success(user));\r\n          history.push('/');\r\n        },\r\n        error => {\r\n          dispatch(failure(error));\r\n          dispatch(alertActions.error(error));\r\n        }\r\n      );\r\n  };\r\n\r\n  function request(user) { return { type: userConstants.LOGIN_REQUEST, user } }\r\n  function success(user) { return { type: userConstants.LOGIN_SUCCESS, user } }\r\n  function failure(error) { return { type: userConstants.LOGIN_FAILURE, error } }\r\n}\r\n\r\n// logout\r\nconst logout = () => {\r\n  userService.logout();\r\n  return { type: userConstants.LOGOUT };\r\n}\r\n\r\n// getAll\r\nconst getAll = () => {\r\n  return dispatch => {\r\n      dispatch(request());\r\n\r\n      userService.getAll()\r\n          .then(\r\n              users => dispatch(success(users)),\r\n              error => dispatch(failure(error))\r\n          );\r\n  };\r\n\r\n  function request() { return { type: userConstants.GETALL_REQUEST } }\r\n  function success(users) { return { type: userConstants.GETALL_SUCCESS, users } }\r\n  function failure(error) { return { type: userConstants.GETALL_FAILURE, error } }\r\n}\r\n\r\nexport const userActions = {\r\n  login,\r\n  logout,\r\n  getAll\r\n};","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { userActions } from '../actions/actions';\r\n\r\nclass LoginPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // reset login status\r\n    this.props.dispatch(userActions.logout());\r\n\r\n    this.state = {\r\n        username: '',\r\n        password: '',\r\n        submitted: false\r\n    };\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({ [name]: value });\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.setState({ submitted: true });\r\n    const { username, password } = this.state;\r\n    const { dispatch } = this.props;\r\n    if (username && password) {\r\n      dispatch(userActions.login(username, password));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { loggingIn, alert, authentication } = this.props;\r\n    const { username, password, submitted } = this.state;\r\n\r\n    return (\r\n      <form name=\"form\" onSubmit={this.handleSubmit}>\r\n        <h1 className=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\r\n        <div className={'form-group' + (submitted && !username ? ' has-error' : '')}>\r\n            <label htmlFor=\"username\">Username</label>\r\n            <input type=\"text\" className={'form-control' + (submitted && !username ? ' is-invalid' : '')} name=\"username\" value={username} onChange={this.handleChange} />\r\n            {submitted && !username &&\r\n                <div className=\"invalid-feedback\">Username is required</div>\r\n            }\r\n        </div>\r\n        <div className={'form-group' + (submitted && !password ? ' has-error' : '')}>\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input type=\"password\" className={'form-control' + (submitted && !password ? ' is-invalid' : '')} name=\"password\" value={password} onChange={this.handleChange} />\r\n            {submitted && !password &&\r\n                <div className=\"invalid-feedback\">Password is required</div>\r\n            }\r\n        </div>\r\n        <div className=\"form-group\">\r\n            <button className=\"btn btn-primary\" style={{marginRight: 10}}>Login</button>\r\n            {loggingIn &&\r\n              <img alt=\"\" src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\r\n            }\r\n        </div>\r\n        {alert.message && !authentication.loggedIn &&\r\n          <div className=\"alert alert-danger\">{alert.message}</div>\r\n        }\r\n        {/*authentication.loggedIn &&\r\n          <div className=\"alert alert-success\" role=\"alert\">\r\n            <h4 className=\"alert-heading mt-3\">Well done!</h4>\r\n            <p>Logged in as: <strong>{authentication.user.username}</strong></p>\r\n          </div>\r\n        */}\r\n        {authentication.loggedIn && <Redirect push to=\"/products\" />}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { loggingIn } = state.authentication;\r\n  const { alert } = state;\r\n  const { authentication } = state;\r\n  return ({\r\n    loggingIn,\r\n    alert,\r\n    authentication\r\n  });\r\n}\r\n\r\nexport default connect(mapStateToProps)(LoginPage);","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass ProductItem extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-4 product-item\">\r\n        <div className=\"product-grid4\">\r\n          <div className=\"product-content\">\r\n            <h3 className=\"title\">{this.props.name}</h3>\r\n            <div className=\"price\">\r\n              ${this.props.price}\r\n            </div>\r\n            <button className=\"add-to-cart\" onClick={() => { this.props.onClick(this.props.id, this.props.name, this.props.price) }}>ADD TO CART</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nProductItem.propTypes = {\r\n  name: PropTypes.string,\r\n  price: PropTypes.number\r\n}\r\n\r\nexport default ProductItem;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass CartProductItem extends Component {\r\n  render() {\r\n    return (\r\n      <li className=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n        <div>\r\n          <h6 className=\"cart-item--title my-0\">{this.props.name}</h6>\r\n          <small>x {this.props.count}</small>\r\n          <button className=\"remove-item\" onClick={() => this.props.onClick(this.props.id)}>X</button>\r\n        </div>\r\n        <span className=\"text-muted\">${this.props.price * this.props.count}</span>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n\r\nCartProductItem.propTypes = {\r\n  name: PropTypes.string,\r\n  price: PropTypes.number,\r\n  count: PropTypes.number\r\n}\r\n\r\nexport default CartProductItem;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport CartProductItem from './CartProductItem';\r\nimport { removeFromCart } from '../actions/actions';\r\n\r\nclass Cart extends Component {\r\n\r\n  handleRemove = id => {\r\n    this.props.onRemove(id);\r\n    this.props.calcTotal();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App-cart\">\r\n        <h4 className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <span className=\"text-muted\">Your cart</span>\r\n          <span className=\"badge badge-secondary badge-pill\">\r\n          {\r\n            this.props.cart.map(product => product.count).reduce((a, b) => a + b, 0)\r\n          }\r\n          </span>\r\n        </h4>\r\n        <ul className=\"list-group mb-3\">\r\n          {\r\n            this.props.cart.map((product) => {\r\n              return <CartProductItem key={product.id} id={product.id} {...product} onClick={this.handleRemove} />;\r\n            })\r\n          }\r\n          <li className=\"list-group-item d-flex justify-content-between\">\r\n            <span>Total (USD)</span>\r\n            <strong>${this.props.cartTotal}</strong>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCart.propTypes = {\r\n  cartTotal: PropTypes.number\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.products,\r\n    cart: state.cart,\r\n    cartTotal: state.cartTotal\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onRemove: id => dispatch(removeFromCart({ id: id })),\r\n    calcTotal: () => dispatch({ type: 'CALC_TOTAL' })\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);","import React, { Component } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { addToCart } from '../actions/actions';\r\nimport ProductItem from './ProductItem';\r\nimport Cart from './Cart';\r\n\r\nclass ProductsPage extends Component {\r\n\r\n  handleAdd = (id, name, price) => {\r\n    if (Object.values(this.props.cart.map(product => product.count)).reduce((a, b) => { return a + b; }, 0) < 3) {\r\n      this.props.onAdd(id, name, price);\r\n      this.props.calcTotal();\r\n    } else {\r\n      alert('You can only add 3 or less items to cart!')\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h3 className=\"products-page-title\">Store</h3>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-8\">\r\n            <div className=\"row products-container\">\r\n              {\r\n                this.props.products.map((product, key) => {\r\n                  return <ProductItem key={key} id={product.id} {...product} onClick={this.handleAdd} />;\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-4 mb-4\">\r\n            <Cart />\r\n            <NavLink className=\"btn btn-primary\" to=\"/checkout\">Proceed to checkout</NavLink>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.products,\r\n    cart: state.cart,\r\n    cartTotal: state.cartTotal\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onAdd: (id, name, price) => dispatch(addToCart({ id: id, name: name, price: price })),\r\n    calcTotal: () => dispatch({ type: 'CALC_TOTAL' })\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductsPage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Cart from './Cart';\r\n\r\nclass CheckoutPage extends Component {\r\n  state = {\r\n    cardIsEmpty: true\r\n  }\r\n\r\n  handleKeyUp = (e) => {\r\n    e.target.value ? e.target.classList.remove('is-invalid') : e.target.classList.add('is-invalid');\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { cart } = this.props;\r\n    cart.length === 0 ? alert('Your cart is empty! Please add some products.') : this.props.history.push('/confirmation');\r\n  }\r\n\r\n  render() {\r\n    const { authentication } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-4 order-md-2 mb-4\">\r\n            <Cart />\r\n          </div>\r\n\r\n          <div className=\"col-md-8 order-md-1\">\r\n            <h4 className=\"mb-3\">Billing address</h4>\r\n            <form className=\"needs-validation\" onSubmit={this.handleSubmit}>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"firstName\">First name</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"firstName\" defaultValue={authentication.loggedIn ? authentication.user.firstName : ''} required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Valid first name is required.\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"lastName\">Last name</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"lastName\" defaultValue={authentication.loggedIn ? authentication.user.lastName : ''} required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Valid last name is required.\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"address\">Phone number</label>\r\n                <input type=\"text\" className=\"form-control\" id=\"phone\" placeholder=\"XXXXXXXXX\" defaultValue={authentication.loggedIn ? authentication.user.phone : ''} required onKeyUp={this.handleKeyUp} />\r\n                <div className=\"invalid-feedback\">\r\n                  Please enter your phone number.\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"address\">Address</label>\r\n                <input type=\"text\" className=\"form-control\" id=\"address\" placeholder=\"ul. Winogrady 3/5\" defaultValue={authentication.loggedIn ? authentication.user.address : ''} required onKeyUp={this.handleKeyUp} />\r\n                <div className=\"invalid-feedback\">\r\n                  Please enter your shipping address.\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"col-md-5 mb-3\">\r\n                  <label htmlFor=\"country\">Country</label>\r\n                  <select className=\"custom-select d-block w-100\" id=\"country\" required>\r\n                    <option value=\"\">Choose...</option>\r\n                    <option>Poland</option>\r\n                  </select>\r\n                  <div className=\"invalid-feedback\">\r\n                    Please select a valid country.\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-4 mb-3\">\r\n                  <label htmlFor=\"state\">City</label>\r\n                  <select className=\"custom-select d-block w-100\" id=\"state\" required>\r\n                    <option value=\"\">Choose...</option>\r\n                    <option>Poznań</option>\r\n                  </select>\r\n                  <div className=\"invalid-feedback\">\r\n                    Please provide a valid city.\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-3 mb-3\">\r\n                  <label htmlFor=\"zip\">Zip</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"zip\" required />\r\n                  <div className=\"invalid-feedback\">\r\n                    Zip code required.\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <hr className=\"mb-4\" />\r\n\r\n              <h4 className=\"mb-3\">Payment</h4>\r\n\r\n              <div className=\"d-block my-3\">\r\n                <div className=\"custom-control custom-radio\">\r\n                  <input id=\"credit\" name=\"paymentMethod\" type=\"radio\" className=\"custom-control-input\" defaultChecked required />\r\n                  <label className=\"custom-control-label\" htmlFor=\"credit\">Credit card</label>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"cc-name\">Name on card</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"cc-name\" defaultValue={authentication.loggedIn ? authentication.user.firstName + ' ' + authentication.user.lastName : ''} required onKeyUp={this.handleKeyUp} />\r\n                  <small className=\"text-muted\">Full name as displayed on card</small>\r\n                  <div className=\"invalid-feedback\">\r\n                    Name on card is required\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"cc-number\">Credit card number</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"cc-number\" required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Credit card number is required\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-3 mb-3\">\r\n                  <label htmlFor=\"cc-expiration\">Expiration</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"cc-expiration\" required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Expiration date required\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-3 mb-3\">\r\n                  <label htmlFor=\"cc-cvv\">CVV</label>\r\n                  <input type=\"text\" className=\"form-control\" id=\"cc-cvv\" required onKeyUp={this.handleKeyUp} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Security code required\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <hr className=\"mb-4\" />\r\n              <button className=\"btn btn-primary btn-lg btn-block\" type=\"submit\">Continue to checkout</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { authentication, cart } = state;\r\n  return ({\r\n    authentication,\r\n    cart\r\n  });\r\n}\r\n\r\nexport default connect(mapStateToProps)(CheckoutPage);","import React, { Component } from 'react';\r\n\r\nclass NotFoundPage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"products-page\">\r\n        <h1>NOT FOUND!</h1>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotFoundPage;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass ConfirmationPage extends Component {\r\n  render() {\r\n    let date = new Date();\r\n    let receiveDate = new Date(date);\r\n    receiveDate.setDate(receiveDate.getDate() + 3);\r\n\r\n    let dd = receiveDate.getDate();\r\n    let mm = receiveDate.getMonth() + 1;\r\n    let yyyy = receiveDate.getFullYear();\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-8 offset-2\">\r\n          <div className=\"alert alert-success\" role=\"alert\">\r\n            <h4 className=\"alert-heading mt-2 mb-4\">Thank You for your order!</h4>\r\n            <hr />\r\n            <div className=\"order-total\">\r\n              <ul className=\"list-group mb-3\">\r\n                {\r\n                  this.props.cart.map((product) => {\r\n                    return (\r\n                      <li key={product.id} className=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n                        <div>\r\n                          <h6 className=\"cart-item--title my-0\">{product.name}</h6>\r\n                          <small>x {product.count}</small>\r\n                        </div>\r\n                        <span className=\"text-muted\">${product.price * product.count}</span>\r\n                      </li>\r\n                    );\r\n                  })\r\n                }\r\n                <li className=\"list-group-item d-flex justify-content-between\">\r\n                  <span>Total (USD)</span>\r\n                  <strong>${this.props.cartTotal}</strong>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <hr />\r\n            <p className=\"mb-2\">You will receive your goodies on <strong>{dd}.{mm}.{yyyy}</strong></p>\r\n          </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.products,\r\n    cart: state.cart,\r\n    cartTotal: state.cartTotal\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps)(ConfirmationPage);","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass ProductItemManage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-4 product-item\">\r\n        <div className=\"product-grid4\">\r\n          <div className=\"product-content\">\r\n            <h3 className=\"title\">{this.props.name}</h3>\r\n            <div className=\"price\">\r\n              ${this.props.price}\r\n            </div>\r\n            <button className=\"add-to-cart remove-product\" onClick={() => { this.props.onClick(this.props.id) }}>X</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nProductItemManage.propTypes = {\r\n  name: PropTypes.string,\r\n  price: PropTypes.number\r\n}\r\n\r\nexport default ProductItemManage;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { addProduct, removeProduct } from '../actions/actions';\r\nimport ProductItemManage from './ProductItemManage';\r\n\r\nclass ManageProductsPage extends Component {\r\n  state = {\r\n    productName: '',\r\n    productPrice: ''\r\n  }\r\n\r\n  handleRemove = id => this.props.onRemove(id);\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(this.state);\r\n\r\n    const { productName: name, productPrice: price } = this.state;\r\n\r\n    const id = Math.max.apply(Math, this.props.products.map( product => product.id )) + 1;\r\n\r\n    this.props.onAdd(id, name, price);\r\n  }\r\n\r\n  handleProductName = (e) => {\r\n    this.setState({\r\n      productName: e.target.value\r\n    });\r\n  }\r\n\r\n  handleProductPrice = (e) => {\r\n    this.setState({\r\n      productPrice: parseInt(e.target.value)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h3 className=\"products-page-title mb-5\">Products management page</h3>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h5 className=\"mb-3\">Add new product</h5>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <form className=\"add-product-form mb-5\" onSubmit={this.handleSubmit}>\r\n              <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                  <input type=\"text\" className=\"form-control\" id=\"productName\" placeholder=\"Product name\" onKeyUp={this.handleProductName} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Valid name is required.\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <input type=\"text\" className=\"form-control\" id=\"productPrice\" placeholder=\"Product price\" onKeyUp={this.handleProductPrice} />\r\n                  <div className=\"invalid-feedback\">\r\n                    Valid price is required.\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <button className=\"btn btn-primary\" type=\"submit\">Add</button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h5 className=\"mb-4\">Existing products</h5>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"row products-container\">\r\n              {\r\n                this.props.products.map((product, key) => {\r\n                  return <ProductItemManage key={key} id={product.id} {...product} onClick={this.handleRemove} />;\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.products\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onAdd: (id, name, price) => dispatch(addProduct({ id: id, name: name, price: price })),\r\n    onRemove: id => dispatch(removeProduct({ id: id }))\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageProductsPage);","import React, { Component } from 'react';\r\n\r\nclass ManageUsersPage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"manage-users-page\">\r\n        <h1>This is the users management page!</h1>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManageUsersPage;","import React from 'react';\r\nimport { Router, Route, Switch } from 'react-router-dom';\r\nimport { AdminRoute } from '../components/AdminRoute';\r\nimport createHistory from 'history/createBrowserHistory';\r\nimport Nav from '../components/Nav';\r\nimport LoginPage from '../components/LoginPage';\r\nimport ProductsPage from '../components/ProductsPage';\r\nimport CheckoutPage from '../components/CheckoutPage';\r\nimport NotFoundPage from '../components/NotFoundPage';\r\nimport ConfirmationPage from '../components/ConfirmationPage';\r\nimport ManageProductsPage from '../components/ManageProductsPage';\r\nimport ManageUsersPage from '../components/ManageUsersPage';\r\n\r\nexport const history = createHistory();\r\n\r\nconst AppRouter = () => (\r\n  <Router history={history}>\r\n    <div>\r\n      <Nav />\r\n      <main className=\"App-main\">\r\n        <Switch>\r\n          <Route path=\"/\" component={ProductsPage} exact={true} />\r\n          <Route path=\"/login\" component={LoginPage} exact={true} />\r\n          <Route path=\"/products\" component={ProductsPage} exact={true} />\r\n          <Route path=\"/checkout\" component={CheckoutPage} exact={true} />\r\n          <Route path=\"/confirmation\" component={ConfirmationPage} exact={true} />\r\n          <AdminRoute path=\"/manage-products\" component={ManageProductsPage} exact={true} />\r\n          <AdminRoute path=\"/manage-users\" component={ManageUsersPage} exact={true} />\r\n          <Route component={NotFoundPage} />\r\n        </Switch>\r\n      </main>\r\n    </div>\r\n  </Router>\r\n);\r\n\r\nexport default AppRouter;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport { rootReducer } from './reducers/reducers';\nimport { configureFakeBackend } from './helpers/fake-backend';\nimport { Provider } from 'react-redux';\nimport './styles/style.scss';\nimport AppRouter from './routers/AppRouter';\nimport * as serviceWorker from './serviceWorker';\n\nconst loggerMiddleware = createLogger();\n\nconst store = createStore(\n  rootReducer,\n  applyMiddleware(\n    thunkMiddleware,\n    loggerMiddleware\n  )\n);\n\n// setup fake backend\nconfigureFakeBackend();\n\nReactDOM.render(\n  <Provider store={store}>\n    <AppRouter />\n  </Provider>, \n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export function configureFakeBackend() {\r\n  let users = [\r\n    {\r\n      id: 1,\r\n      username: 'admin',\r\n      password: 'admin'\r\n    },\r\n    {\r\n      id: 2,\r\n      username: 'rbatsenko',\r\n      password: '12345',\r\n      firstName: 'Roman',\r\n      lastName: 'Batsenko',\r\n      address: 'ul. Dworcowa 55/2',\r\n      phone: 456789123\r\n    }\r\n  ];\r\n\r\n  let realFetch = window.fetch;\r\n\r\n  window.fetch = function (url, opts) {\r\n      return new Promise((resolve, reject) => {\r\n          // wrap in timeout to simulate server api call\r\n          setTimeout(() => {\r\n\r\n              // authenticate\r\n              if (url.endsWith('/login') && opts.method === 'POST') {\r\n                  // get parameters from post request\r\n                  let params = JSON.parse(opts.body);\r\n\r\n                  // find if any user matches login credentials\r\n                  let filteredUsers = users.filter(user => {\r\n                      return user.username === params.username && user.password === params.password;\r\n                  });\r\n\r\n                  if (filteredUsers.length) {\r\n                      // if login details are valid return user details and fake jwt token\r\n                      let user = filteredUsers[0];\r\n                      let responseJson = {\r\n                          id: user.id,\r\n                          username: user.username,\r\n                          firstName: user.firstName,\r\n                          lastName: user.lastName,\r\n                          address: user.address,\r\n                          phone: user.phone,\r\n                          token: 'fake-jwt-token'\r\n                      };\r\n                      resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\r\n                  } else {\r\n                      // else return error\r\n                      reject('Username or password is incorrect');\r\n                  }\r\n\r\n                  return;\r\n              }\r\n\r\n              // get users\r\n              if (url.endsWith('/users') && opts.method === 'GET') {\r\n                  // check for fake auth token in header and return users if valid, this security is implemented server side in a real application\r\n                  if (opts.headers && opts.headers.Authorization === 'Bearer fake-jwt-token') {\r\n                      resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(users))});\r\n                  } else {\r\n                      // return 401 not authorised if token is null or invalid\r\n                      reject('Unauthorised');\r\n                  }\r\n\r\n                  return;\r\n              }\r\n\r\n              // pass through any requests not handled above\r\n              realFetch(url, opts).then(response => resolve(response));\r\n\r\n          }, 500);\r\n      });\r\n  }\r\n}"],"sourceRoot":""}